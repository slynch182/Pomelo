<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://accounts.google.com/gsi/client" async defer></script>
  <title>Simple Webpage</title>
  <style>
    /* CSS to increase the width of the left column in the table */
    table th:first-child,
    table td:first-child {
      width: 200px; /* Adjust the width as needed */
    }
    /* CSS to add border to the table */
    table, th, td {
      border: 1px solid black;
      border-collapse: collapse;
    }
    /* CSS to align headers to the left */
    th {
      text-align: left;
    }
  </style>
</head>
<body>
    <!-- Google Sign-In Button -->
    <div id="g_id_onload"
      data-client_id="937304914639-jvs3kcp6srocp481en53p7ajm8jvfq99.apps.googleusercontent.com"
      data-context="signin"
      data-ux_mode="popup"
      data-itp_support="true">
    </div>

    <div class="g_id_signin"
      data-type="standard"
      data-shape="rectangular"
      data-theme="filled_blue"
      data-text="signin_with"
      data-size="large"
      data-logo_alignment="left"
      data-width="180">
  </div>
  <script>
      function handleCredentialResponse(response) {
        console.log("Encoded JWT ID token: " + response.credential);
        // Decode and use the token (for server-side verification)
      
        // Decode JWT Token (Optional - Requires JWT Library)
        const userData = parseJwt(response.credential);
        document.getElementById("user-info").innerHTML = `
          <b>Name:</b> ${userData.name} <br>
          <b>Email:</b> ${userData.email} <br>
          <img src="${userData.picture}" width="100">
        `;
      }

      function parseJwt(token) {
        let base64Url = token.split('.')[1];
        let base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
        return JSON.parse(atob(base64));
      }
  
      window.onload = function () {
        google.accounts.id.initialize({
          client_id: "937304914639-jvs3kcp6srocp481en53p7ajm8jvfq99.apps.googleusercontent.com"
          callback: handleCredentialResponse
          ux_mode: "popup",
          auto_select: true
        });
    
        google.accounts.id.prompt(); // also display the One Tap dialog
      };
    </script>

  <p></p>
  <form method="POST" onsubmit="handleSubmit(event)">
    <input type="text" name="text" placeholder="Enter text here">
    <button type="submit">Submit</button>
  </form>
  <h2>Submitted Text</h2>
  <table>
    <thead>
      <tr>
        <th>Text</th>
        <th>Date and Time</th>
      </tr>
    </thead>
    <tbody>
    </tbody>
  </table>
  <script>
    function handleSubmit(event) {
      event.preventDefault();
      const textInput = document.querySelector('input[name="text"]');
      const text = textInput.value;
      // Get the current date and time
      const now = new Date();
      // Format the date and time using the user's local timezone
      const formattedTime = new Intl.DateTimeFormat('default', {
        timeZone: Intl.DateTimeFormat().resolvedOptions().timeZone,
        hour: 'numeric',
        minute: 'numeric',
        second: 'numeric',
        day: 'numeric',
        month: '2-digit',
        year: 'numeric',
        timeZoneName: 'short'
      }).format(now);
      const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
      const tableBody = document.querySelector('tbody');
      const newRow = tableBody.insertRow();
      const textCell = newRow.insertCell();
      const timeCell = newRow.insertCell();
      textCell.textContent = text;
      timeCell.textContent = `${formattedTime} (${timezone})`;
      textInput.value = ''; // Clear the input box
      // Get the timezone and display it
      console.log("Timezone:", timezone);
    }
  </script>
</body>
</html>
